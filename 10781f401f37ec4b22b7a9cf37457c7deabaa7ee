{
  "comments": [
    {
      "key": {
        "uuid": "da1255d7_8ca967e2",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 474
      },
      "writtenOn": "2018-01-02T09:41:54Z",
      "side": 1,
      "message": "Do we really need a communication protocol? Could we evaluate if we could rely only on the database as it would be much simler and robust?",
      "range": {
        "startLine": 51,
        "startChar": 1,
        "endLine": 53,
        "endChar": 7
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da1255d7_0cbb3710",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 201
      },
      "writtenOn": "2018-01-02T13:35:40Z",
      "side": 1,
      "message": "Why ZMQ? IIUC it is removed as a dep in Zuul/Nodepool V3, so this would be adding new dep long term.",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 6
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da1255d7_ac40ab08",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 166
      },
      "writtenOn": "2018-01-02T13:54:46Z",
      "side": 1,
      "message": "I\u0027m not found of using a database as an IPC. It\u0027s not suited to manage jobs queues.\n\nIf people worry about using ZMQ, we can switch to mere REST API but ZMQ provides reliable and flexible communication layer. Redis might be an alternative with pub/sub feature, too.",
      "parentUuid": "da1255d7_8ca967e2",
      "range": {
        "startLine": 51,
        "startChar": 1,
        "endLine": 53,
        "endChar": 7
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da1255d7_4cf6cfd8",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-01-02T17:39:12Z",
      "side": 1,
      "message": "I think the general idea is to have a queue of builds *somewhere* (even if that doesn\u0027t end up being zeromq) and then have workers pick up builds from that queue instead of the current architecture where each worker sequentially scans and builds packages.\n\nLet\u0027s not bikeshed on zeromq but instead agree whether or not this general direction makes sense.",
      "parentUuid": "da1255d7_0cbb3710",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 6
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da1255d7_ecb903ee",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 201
      },
      "writtenOn": "2018-01-02T19:56:49Z",
      "side": 1,
      "message": "Agreed that ZeroMQ should not be explicitly mentioned in the spec.\n\nI wonder though if this is not reimplementing Zuul, could we consider https://github.com/openstack-infra/zuul/blob/feature/zuulv3/doc/source/admin/drivers/git.rst probably sub-classed  to take rdoinfo into account.",
      "parentUuid": "da1255d7_4cf6cfd8",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 6
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da1255d7_0c00d7a9",
        "filename": "doc/specs/new-architecture-sched-worker.rst",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-01-02T17:52:34Z",
      "side": 1,
      "message": "I\u0027m curious -- does this mean we would have on set of git repositories for all workers and releases ?\n\nRight now each worker clones and refreshes it\u0027s own copy of the repositories, right ?\n\nI can see it as a good thing since it means less resource utilization (both cpu and disk space) but it might break some assumptions (i.e, checking out specific commits/branches)",
      "range": {
        "startLine": 74,
        "startChar": 34,
        "endLine": 74,
        "endChar": 62
      },
      "revId": "10781f401f37ec4b22b7a9cf37457c7deabaa7ee",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    }
  ]
}