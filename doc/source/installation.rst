============
Installation
============

Installing prerequisites:

.. code-block:: bash

    $ sudo yum install docker-io git git-hg createrepo
    $ sudo systemctl start httpd
    $ sudo systemctl start docker

Add the user you intend to run as to the docker group:

.. code-block:: bash

    $ sudo usermod -a -G docker $USER
    $ newgrp docker
    $ newgrp $USER

Install Delorean:

.. code-block:: bash

    $ pip install delorean

Or, if you have virtualenvwrapper installed:

.. code-block:: bash

    $ mkvirtualenv delorean
    $ pip install delorean

The httpd module is not strictly required, Delorean does not use it. However, it will output
it's results in a way that is suitable for a web-server to serve. This means you can easily set up
a web-server to serve the finished ``.rpm`` and ``.log`` files.


Configuration
-------------

Configuration is done in an INI-file. An example file called ``projects.ini`` is included.
The configuration file looks like this:

.. code-block:: ini

    [DEFAULT]
    datadir=./data
    baseurl=http://trunk.rdoproject.org/
    distro=rpm-master
    smtpserver=

* ``datadir`` is the directory where the packages and repositories will be created.

* ``baseurl`` is the URL to the data-directory, as hosted by your web-server. Unless you are
  installing Delorean for local use only, this must be a publicly accessible URL.

* ``distro`` is the distribution to use for building the packages.

* ``smtpserver`` is the address of the mail server for sending out notification emails.
  If this is empty no emails will be sent out. If you are running Delorean locally,
  then do not set an smtpserver.


Configuring your httpd
----------------------

The output generated by Delorean is a file structure suitable for serving with a web-server.
You can either add a section in the server configuration where you map a URL to the
data directories, or just make a symbolic link:

.. code-block:: bash

    $ cd /var/www/html
    $ sudo ln -s <datadir>/repos .

