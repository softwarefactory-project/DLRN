{
  "comments": [
    {
      "key": {
        "uuid": "3ab451fb_bc56a104",
        "filename": "scripts/build_rpm.sh",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 200
      },
      "writtenOn": "2017-08-04T09:12:23Z",
      "side": 1,
      "message": "I guess this new global will later be used by the rubygem specs. Do you have an example?",
      "revId": "adfd42d5f6cc63bb8e630eb9814939c97f5ef603",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ab451fb_9c72c5ac",
        "filename": "scripts/build_rpm.sh",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 169
      },
      "writtenOn": "2017-08-04T09:36:40Z",
      "side": 1,
      "message": "Yes I have:\n\nhttps://github.com/centos-opstools/rubygem-em-http-request/blob/master/rubygem-em-http-request.spec#L51",
      "parentUuid": "3ab451fb_bc56a104",
      "revId": "adfd42d5f6cc63bb8e630eb9814939c97f5ef603",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ab451fb_dc9f2db3",
        "filename": "scripts/build_rpm.sh",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 200
      },
      "writtenOn": "2017-08-04T09:51:32Z",
      "side": 1,
      "message": "Mmm... Have you tried using upstream_version?\n\nWe have that in the RDO specs, see https://github.com/rdo-packages/oslo-policy-distgit/blob/rpm-master/python-oslo-policy.spec#L1 for a fallback macro used to avoid the %if and https://github.com/rdo-packages/oslo-policy-distgit/blob/rpm-master/python-oslo-policy.spec#L134 for its usage in %setup",
      "parentUuid": "3ab451fb_9c72c5ac",
      "revId": "adfd42d5f6cc63bb8e630eb9814939c97f5ef603",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ab451fb_9caf6594",
        "filename": "scripts/build_rpm.sh",
        "patchSetId": 1
      },
      "lineNbr": 129,
      "author": {
        "id": 169
      },
      "writtenOn": "2017-08-04T14:12:08Z",
      "side": 1,
      "message": "So from my local runs upstream_version does not help that much, because it contains the same value as version, as you can see yourself:\n\n  + cat rubygem-em-http-request.spec\n  %global dlrn 1\n  %define upstream_version 1.1.5\n  # Generated from em-http-request-1.1.3.gem by gem2rpm -*- rpm-spec -*-\n  %global gem_name em-http-request\n\n  Name:           rubygem-%{gem_name}\n  Version: 1.1.5\n  Release: 0.20170803172051.6061430%{?dist}\n  Summary:        EventMachine based, async HTTP Request client\n  Group:          Development/Languages\n  License:        MIT\n  URL:            http://github.com/igrigorik/em-http-request\n  Source0: em-http-request-1.1.5-0.20170803172051.6061430.gem\n  Patch0:         0000-Remove-bundler-dependency.patch\n\nBut I need \"em-http-request-1.1.5-0.20170803172051.6061430\" to point %setup to correct directory. Unfortunately there is no way to tell \u0027gem unpack\u0027 the target basename (only target dirname is available), so it has to be done other way around.",
      "parentUuid": "3ab451fb_dc9f2db3",
      "revId": "adfd42d5f6cc63bb8e630eb9814939c97f5ef603",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    }
  ]
}